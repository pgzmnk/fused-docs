"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[6322],{8586:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var t=s(4848),n=s(8453),o=s(3650);const a={},c="Vectorize",i={id:"basics/transform/raster/vectorize",title:"Vectorize",description:"",source:"@site/docs/basics/transform/raster/vectorize.mdx",sourceDirName:"basics/transform/raster",slug:"/basics/transform/raster/vectorize",permalink:"/fused-docs/basics/transform/raster/vectorize",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Band algebra",permalink:"/fused-docs/basics/transform/raster/band-algebra"},next:{title:"Buffer",permalink:"/fused-docs/basics/transform/vector/buffer"}},d={},u=[];function f(e){const r={code:"code",h1:"h1",pre:"pre",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"vectorize",children:"Vectorize"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'@fused.udf\ndef udf(\n    threshold: int=100,\n    cog_url = "https://eodata.sage.uvt.ro/copernicus-dem/copernicus-dem-30m/Copernicus_DSM_COG_10_N37_00_W123_00_DEM/Copernicus_DSM_COG_10_N37_00_W123_00_DEM.tif"\n):\n    import geopandas as gpd\n    import rasterio\n    import shapely\n    from rasterio.features import shapes\n\n    with rasterio.open(cog_url) as src:\n        arr = src.read()\n        bounds = src.bounds\n        transform = src.transform\n        crs = src.crs\n    arr = (arr > threshold).astype("uint8")\n    shapes_list = list(shapes(arr, mask=None, transform=transform))\n    geoms = [shapely.geometry.shape(i[0]) for i in shapes_list]\n    gdf = gpd.GeoDataFrame(\n        shapes_list, geometry=geoms, columns=["geometry", "value"], crs=crs\n    )\n    return gdf[gdf.value == 1]\n'})}),"\n","\n","\n",(0,t.jsx)(o.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA31T34%2BbMAz%2BV1D20kqU8qMUqMTTpk2a9nanezlOVSCmRE0TlqTttdP%2B9xnacj10N4OC%2Fdmf4xjnD6kUA7IifNcqbZ32xKDaOtQ4LdsW8ooaq4HuBLedw9gBr%2FcG2Jq27YBsQLVUMgzDd9OyQnaPsZ7lVsCkIE9QWaX5GQoyvThto8E0SjAnx9yeEZyBxsjHG14Q1%2FFdJ%2FB9XMPYv%2FHUFiRyCsJKlvhZFad1wNIwLUt%2FWUd1FUdZFmTLKAt8hs6Ylou4XGZhGWdpgJSUJmlNFxEtSCFZjamG83h6Lyf9Bq4z1JcP2rUCITeuI6hF5iwIQ28RBWGWuE6UeEkSZUnYBX1xvmLzLDg72vaduLR4XTVU20khHRTstfcNwavZCUavjT0JyAuCeqleV%2FN5D5j5xZ4zqrezQ4bteaNxyS2nYn3gcEQ%2B7pt3yZ%2FQfOisux06weK53TPIUXFHLiU3Vx8e873vrNQuT0dgy23V5P4dOr3TBT2BNvnziIO1%2Feo8o7o6KcgPUD%2BNkn3Au1PehFFLc1Z%2F4NmAXddciHWlhNL5cxjH3ezgv%2Bkn6eUTiuASRpRuuQzfRyS8GTglLH%2FUe%2FhfziNntskxyyho%2Bmbe0iM0JS7R8HvPNexAWkNWz2S4WVcfGNupr1RrekLlRLXAz2W6eqUW6thPGVobTdvmwM%2BoDpd5RisgLy7h5vteiIdKA0iyqqkw8PcfQKiwxRgEAAA%3D"})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(f,{...e})}):f(e)}},3650:(e,r,s)=>{s.d(r,{A:()=>n});s(6540);var t=s(4848);function n(e){let{children:r,url:s}=e;return(0,t.jsx)("iframe",{src:s,height:"1050px",width:"100%",scrolling:"no"})}},8453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>c});var t=s(6540);const n={},o=t.createContext(n);function a(e){const r=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(o.Provider,{value:r},e.children)}}}]);