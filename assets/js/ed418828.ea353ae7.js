"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[4067],{7829:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var i=t(4848),r=t(8453),o=t(3650);const s={},a="Origin Destination",d={id:"basics/transform/advanced/od",title:"Origin Destination",description:"",source:"@site/docs/basics/transform/advanced/od.mdx",sourceDirName:"basics/transform/advanced",slug:"/basics/transform/advanced/od",permalink:"/fused-docs/basics/transform/advanced/od",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Isochrone",permalink:"/fused-docs/basics/transform/advanced/isochrone"},next:{title:"Routing",permalink:"/fused-docs/basics/transform/advanced/routing"}},p={},c=[];function m(n){const e={code:"code",h1:"h1",pre:"pre",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"origin-destination",children:"Origin Destination"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"@fused.udf\ndef udf(n: int=10, n_points = 20, object_to_return: str = 'points'):\n    import geopandas as gpd\n    import pandas as pd\n    import numpy as np\n    import matplotlib.pyplot as plt\n    from shapely.geometry import Point, LineString\n    import random\n    \n    # Define the bounding box\n    # minx, miny, maxx, maxy = -122.55, 37.70, -122.35, 37.82\n    minx, miny, maxx, maxy = -5.97468,35.5492, -5.37391, 35.89908\n\n    # Generate random points within the bounding box\n    np.random.seed(1)\n    points = np.random.rand(n_points, 2)\n    points[:, 0] = points[:, 0] * (maxx - minx) + minx\n    points[:, 1] = points[:, 1] * (maxy - miny) + miny\n    \n    # Create a GeoDataFrame for the points\n    gdf_points = gpd.GeoDataFrame({'geometry': [Point(p) for p in points]})\n\n    # Generate random origin-destination pairs with weights\n    edges = []\n    for _ in range(n_points * 2):  # arbitrary number of edges\n        start_idx, end_idx = random.sample(range(n_points), 2)\n        start_point = points[start_idx]\n        end_point = points[end_idx]\n        weight = random.randint(1, 5)\n        line = LineString([start_point, end_point])\n        edges.append({'geometry': line, 'weight': weight})\n    \n    # Create a GeoDataFrame for the edges\n    gdf_edges = gpd.GeoDataFrame(edges)\n    print(gdf_edges)\n    if object_to_return == 'points':\n        return gdf_points\n    else:\n        return gdf_edges\n"})}),"\n","\n","\n",(0,i.jsx)(o.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA61U227bMAz9FUF7SDK4jpct7RJAL22xAMWwPrTYHuLCUC3G0aJIniTXSYf9%2Byg7l9boLsBGGzbJQx6RkunvNDcC6JTKdWmsJ%2BVWQL4i3JFSrFK98zpvga%2BV9AFw%2FuBfVA5Exsvy4CnAlFwLDMO7KEWqw%2BV87KVX0E%2Fp9WVKB61XZ6WR2jvCkDN2SgqwGPGpWt%2BDJWZBWjilEUki8ibBx2g8aNhqK31gu1maWuqChJg9XYTWLjXereXNCjTrLdwyO7tSSX09O%2F%2FCt5vz8YWb1Vej%2FLaXarHAOg4NxbbS%2FSYtIub%2BK%2BQ%2B8yaz4CuLRCAKcL3jkmyvDALPsa2%2FpGvjf8GXaqWLiCjukbB%2FMo5PT99H5O04Pns3GTX4K3KBx%2BOBrHnZ7E57iFm%2B5Nb3U01Q8DTjS3TuzCAYnTm%2FVcBSivq92UyHw8bhhq09FNyuTh4muLvHNKmll1xlDxJqzMd1WSD%2FjOZNsJ6sEATrlr4SwFCJOpDRxQ7DDp9jj8as2aTjLKXPlyx54h080RXfgnVs3snB2j4GpFNXkJTOwFw5o5uAZ13uRXDPmVi8gOBM4HkKdmsreAEuwGdKashqKfyS9WqQxdK%2FHiVJ73fRuVHGst78EN58%2Bwfrrps86G7Rf2l3P0l%2FLHQ%2BGoehDI%2BkndHk7p%2F3KrB02zyae350DWhELXyrpIU1YL10OqeHH9AOA%2BeDuuHW8i0qW24VvtoRoXcRle5DpdRNbgE0nS64cvDjJwx7cbwWBQAA"})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(m,{...n})}):m(n)}},3650:(n,e,t)=>{t.d(e,{A:()=>r});t(6540);var i=t(4848);function r(n){let{children:e,url:t}=n;return(0,i.jsx)("iframe",{src:t,height:"1050px",width:"100%",scrolling:"no"})}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>a});var i=t(6540);const r={},o=i.createContext(r);function s(n){const e=i.useContext(o);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),i.createElement(o.Provider,{value:e},n.children)}}}]);