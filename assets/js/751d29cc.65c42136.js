"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[7005],{4952:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>m,frontMatter:()=>o,metadata:()=>d,toc:()=>u});var r=e(4848),s=e(8453),a=e(3650);const o={},c="Routing",d={id:"basics/transform/advanced/routing",title:"Routing",description:"",source:"@site/docs/basics/transform/advanced/routing.mdx",sourceDirName:"basics/transform/advanced",slug:"/basics/transform/advanced/routing",permalink:"/fused-docs/basics/transform/advanced/routing",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Origin Destination",permalink:"/fused-docs/basics/transform/advanced/od"},next:{title:"Get data out",permalink:"/fused-docs/basics/out"}},i={},u=[];function g(t){const n={code:"code",h1:"h1",pre:"pre",...(0,s.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"routing",children:"Routing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"@fused.udf\ndef udf(lat_start = 34.0154145, lng_start = -118.2253804, lat_end = 33.9422, lng_end = -118.4036, cost = 'auto'): \n    import time\n    import pandas as pd\n    import geopandas as gpd\n    from shapely.geometry import Point\n    \n    from utils import get_route, compute_distance\n    \n    start = time.time()\n    gdf = get_route(lat_start, lng_start, lat_end, lng_end, costing = cost)\n    \n    print('time to create route',time.time()-start, 'sec')\n    gdf = compute_distance(gdf, col_name = 'separation')\n    print('route length:',gdf['separation'].values[0]/1000.,'km')\n    gdf['r']=0\n    gdf['g']=255\n    gdf['b']=255\n    gdf_start = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_start,lat_start)], crs = 4326)\n    gdf_start['g']=255\n    \n    gdf_end = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_end,lat_end)], crs = 4326)\n    gdf_end['r']=255\n    return pd.concat([gdf,gdf_start,gdf_end]) \n\n"})}),"\n","\n","\n",(0,r.jsx)(a.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA32VbW%2FqNhTHv4qV%2B6IgcakDeQCkvOjacaWuk6rLthcjFXLiE7AIdmab9rKq330nxAmUsVlIcXx%2BOed%2FfI7Nu5crDt7ME7tKaUuqA4d8S5ghFd%2Bm0q0aq4HtSmFrg7HderE3wFesqrqVNaiKSY4Y%2FtYVT2UqjR1aYUvopd53tbdCrlOvXxtS%2BYU8QCEkELsBwkVuhZJMH8ibsBtSlSwHdCR5bRaa5EppLiSzYFL5%2FHR3%2F%2FOCJOQ9lQTHzU9aqW15kORPpW5mZBnQYRRTOiBf4%2FFwirOXgSOfQUqysKyO5sg4pJEjp%2BOwIx%2FZjomcXcKUBg08oZO4g%2B9BWs1K8sz0tiUnoe%2FcRpPxSYBWpoLcnqNRREctOj1pfZz%2FQu6Erje3BQN%2F3IBxPPE78Onb3QUYx9HUyYyDk8c57qDMBQp9EFhY3PQurTis%2BWBIff8k9ldgtmL5Fuv2ry8COnZf0Dh%2BSeVHU9RF1y8GyjrPTP0ghdKupKk8PlcMq4fN0TCIYIMsGt5Ypu0s9QakxIi9ptbDLRxMr98%2F9k69vsrQwRWgtQ417NQr9Fy0fhs3%2B8%2B4rFHYRV5lfdemwqDl4PIB3nDH3hTWfO5MdP2mhYVekXpzrXbk3Qn4IFa1L9mHOwRfyPe9JL8%2FzFE1s6tj5hhcrpspSm2SWzonLw0HkjcUTi6ZDBmrtiCTG%2FDHEY%2F4JMvieMTCGMKMj4COIaQwGRcZBFAEccwzv6B5nEdZ4EcsGGXhNGJh7vObVPIC%2FXcnfaj3snd0juFbvck15Uk3a0gUmlwqT9zT7cQ9to0FsmPVcReby2iVb9BHr%2BlGvJWGD7joXuuBNIY5lJCkHs6xnrPb2%2BOCuW3ebzkes6%2BvU6zq6TMhhcVDsHoV8FbLtJDUzv%2FA1%2Fq0w1mEeqByYfcczlK9AJRcO6LL%2BzPxt1K7ZHqxWAmbbxJ6tto%2Fm2PLgTbJ8uIb1PlUWy401iP1voF6NEoegU8Zt4MzyxJeXLHg4cbK8uQ3vYcr5jXYVYm39epNcLtJQkr%2FD8pVqXSyHIUDP6CDUdjdQNcSbW3YCH1v4Gn4ay%2Fw9OKNarzZ0uv%2BVpwNjK2nP5jW7ICTA9MlPpqG8V4GnjDzfVkucg0gvVnBSgMf%2FwB8ZlyT7AYAAA%3D%3D"})]})}function m(t={}){const{wrapper:n}={...(0,s.R)(),...t.components};return n?(0,r.jsx)(n,{...t,children:(0,r.jsx)(g,{...t})}):g(t)}},3650:(t,n,e)=>{e.d(n,{A:()=>s});e(6540);var r=e(4848);function s(t){let{children:n,url:e}=t;return(0,r.jsx)("iframe",{src:e,height:"1050px",width:"100%",scrolling:"no"})}},8453:(t,n,e)=>{e.d(n,{R:()=>o,x:()=>c});var r=e(6540);const s={},a=r.createContext(s);function o(t){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function c(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:o(t.components),r.createElement(a.Provider,{value:n},t.children)}}}]);