"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[755],{5973:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>l});var a=s(4848),i=s(8453);const n={},o="UDF Editor",r={id:"workbench/udf-editor",title:"UDF Editor",description:"Code Editor",source:"@site/docs/workbench/udf-editor.mdx",sourceDirName:"workbench",slug:"/workbench/udf-editor",permalink:"/fused-docs/workbench/udf-editor",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/fused-docs/workbench/"},next:{title:"Navigation",permalink:"/fused-docs/workbench/navigation"}},d={},l=[{value:"Code Editor",id:"code-editor",level:2},{value:"Auto, Tile, and File",id:"auto-tile-and-file",level:3},{value:"Toolbar",id:"toolbar",level:3},{value:"Error indicator",id:"error-indicator",level:3},{value:"Module",id:"module",level:2},{value:"Exporting modules",id:"exporting-modules",level:3},{value:"Visualization",id:"visualization",level:2},{value:"Powered by deck.gl",id:"powered-by-deckgl",level:3},{value:"Settings",id:"settings",level:2},{value:"Cache",id:"cache",level:3},{value:"Share &amp; snippets",id:"share--snippets",level:3},{value:"Share",id:"share",level:4},{value:"Snippets",id:"snippets",level:4},{value:"Default parameter values",id:"default-parameter-values",level:3},{value:"Default view state",id:"default-view-state",level:3},{value:"Image preview",id:"image-preview",level:3},{value:"Tags",id:"tags",level:3},{value:"Description",id:"description",level:3}];function c(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"udf-editor",children:"UDF Editor"}),"\n",(0,a.jsx)(t.h2,{id:"code-editor",children:"Code Editor"}),"\n",(0,a.jsx)(t.p,{children:"The UDF Editor is where developers author UDFs. They can write Python to explore and analyze geospatial data of any size interactively."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-1.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"auto-tile-and-file",children:"Auto, Tile, and File"}),"\n",(0,a.jsxs)(t.p,{children:["A UDF can be set to render its outputs on Workbench as a ",(0,a.jsx)(t.a,{href:"/basics/core-concepts/#file--tile",children:"Tile or File"})," - or autodetect between the two based on parameters. The choice depends on the nature of data the UDF will return. New UDFs are set to autodetect by default, and the kind can be changed in the top-right dropdown of the code editor."]}),"\n",(0,a.jsxs)(t.p,{children:["\u261d\ufe0f Read more about File & Tile in the ",(0,a.jsx)(t.a,{href:"/basics/core-concepts/#udf-execution-modes-file-tile",children:"core concepts section"}),"."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"alt text",src:s(4490).A+"",width:"1358",height:"446"})}),"\n",(0,a.jsxs)(t.admonition,{type:"note",children:[(0,a.jsxs)(t.p,{children:['Because the same UDF endpoint can called as either File or Tile, it needs to tell Workbench which one to use. When a UDF is configured as "Auto", Workbench automatically handles the output as Tile if it statically checks that the types ',(0,a.jsx)(t.code,{children:"fused.types.TileXYZ"}),", ",(0,a.jsx)(t.code,{children:"fused.types.TileGDF"}),", or ",(0,a.jsx)(t.code,{children:"fused.types.Bbox"})," are used in the UDF. Otherwise, it assumes File."]}),(0,a.jsxs)(t.p,{children:['Note that the "Auto" setting is specific and applicable only to the Workbench UI. UDFs called via ',(0,a.jsx)(t.code,{children:"fused-py"})," or HTTP requests run as Tile only if a parameter specifies the Tile geometry."]})]}),"\n",(0,a.jsx)(t.h3,{id:"toolbar",children:"Toolbar"}),"\n",(0,a.jsxs)(t.p,{children:["The toolbar atop the editor is where buttons to configure, save, duplicate, download, and delete UDFs are located. Clicking \u201cDownload\u201d saves the present state of the UDF code and module locally as a ",(0,a.jsx)(t.code,{children:".zip"})," file that can be loaded with the Python SDK or shared with others so they can import into their workbench."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-34.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"error-indicator",children:"Error indicator"}),"\n",(0,a.jsx)(t.p,{children:"Sifting through error logs to debug failed multi-hour jobs is a persistent and recurring annoyance of working with large datasets and data orchestrators. The Fused Workbench is desiged with sound developer experience in mind. As such, the UDF code editor immediately highlights errors in the code, so developers can flow and focus on what matters."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/gifs/editor_error.gif",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h2,{id:"module",children:"Module"}),"\n",(0,a.jsx)(t.p,{children:"As UDFs grow in complexity, it's useful to modularize the code to make it reusable and composable. It's also a good practice to keep only the essential \"business logic\" in the decorated UDF function - this makes it easy to know what a UDF does at a glance."}),"\n",(0,a.jsx)(t.p,{children:'With this in mind, a Fused UDF can optionally import Python objects from its acompanying module, with an import statement as if importing from a Python package. In the Workbench, the "module" code editor tab is the place for helper functions and other associated Python objects for the UDF to import. Keep in mind that the module\'s name is configurable in order to avoid naming collisions.'}),"\n",(0,a.jsxs)(t.p,{children:["In this example, UDF imports the function ",(0,a.jsx)(t.code,{children:"arr_to_plasma"})," from its module, which is named ",(0,a.jsx)(t.code,{children:"utils"}),". The function contains support logic the UDF uses it to transform an array."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"@fused.udf\ndef udf(bbox):\n    from utils import arr_to_plasma\n    ...\n    return arr_to_plasma(arr.values, min_max=(0, .8))\n"})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-33.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"exporting-modules",children:"Exporting modules"}),"\n",(0,a.jsx)(t.p,{children:"A module goes wherever its UDF goes."}),"\n",(0,a.jsxs)(t.p,{children:['This means that when a user saves, exports, shares, or uploads a UDF, the code for the module and for the UDF stays together and the import statement works the same. For example, clicking "Download" on a UDF downloads a ',(0,a.jsx)(t.code,{children:".zip"})," file containing a ",(0,a.jsx)(t.code,{children:".py"})," file for each with both the module and the UDF code."]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\ud83d\udca1 Note: At the moment, UDFs in the Workbench have a single module. To support advanced use cases, the Python SDK support multiple modules per UDF."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"visualization",children:"Visualization"}),"\n",(0,a.jsx)(t.p,{children:"A layer is a geo visualization that made up of the UDF's Python code, the output of its execution, and associated visual configurations like color, line width, etc. In the Workbench, layers have a 1:1 relationship with UDFs."}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.a,{href:"/workbench/viz-styling/",children:"Layer styling"})," section dives into how to configure the visual representation of a UDF's output."]}),"\n",(0,a.jsx)(t.h3,{id:"powered-by-deckgl",children:"Powered by deck.gl"}),"\n",(0,a.jsxs)(t.p,{children:["Fused maps data (a vector or raster output from a UDF) as a stack of visual layers. To display it, Fused uses the industry standard ",(0,a.jsx)(t.a,{href:"https://deck.gl/docs/api-reference/geo-layers/tile-layer",children:"deck.gl TileLayer"})," - an open source, high-performance data visualization framework. This means users can feel right at home with programmatic control of each aspect of rendering."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-7.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h2,{id:"settings",children:"Settings"}),"\n",(0,a.jsx)(t.p,{children:"The settings tab is where each UDF can be configured. This section provides quick access to caching and to metadata associated with discoverability and the UDF's profile card."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-27.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"cache",children:"Cache"}),"\n",(0,a.jsx)(t.p,{children:"UDFs run code remotely and return outputs to the browser over the network. Consequently, the map may feel sloggy if UDFs return a large data volume. To resolve this, users can enable caching to store the UDF's returned data in S3."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"\ud83d\udca1 Note that when a UDF's cache is enabled, its output data is stored by default in a Fused-managed S3 bucket. Fused is serious about giving users full control over where their data is stored. Get in touch to set your own bucket."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-28.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"share--snippets",children:"Share & snippets"}),"\n",(0,a.jsx)(t.p,{children:'Once a user creates a UDF in the Workbench, they can use shared endpoint and snippets to call it and load its output it into other workflows. The "Share" and "Snippets" sections shows copyable code snippets to trigger the UDF from within different applications.'}),"\n",(0,a.jsx)(t.h4,{id:"share",children:"Share"}),"\n",(0,a.jsx)(t.p,{children:"Generate signed tokens that allow anyone with the token to call the UDF. These tokens can be revoked."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/gifs/templated_share_snippets.gif",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h4,{id:"snippets",children:"Snippets"}),"\n",(0,a.jsx)(t.p,{children:"By default, UDFs can only be called by user account that creates them. This can be done with the snippets below."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/snippets2.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"default-parameter-values",children:"Default parameter values"}),"\n",(0,a.jsx)(t.p,{children:"UDFs can be called with the parameters they explicitly define. Typed parameters can be set manually or automatically inferred within workbench, then used to trigger parametrized UDF runs via API. It's also possible to set predefined values that appear as options."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/gifs/parameters.gif",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"default-view-state",children:"Default view state"}),"\n",(0,a.jsx)(t.p,{children:'Setting a default view state on a published or shared UDF helps users navigate to a default viewport. That viewport can optionally be enabled and configured in this section. These values can be set manually or automatically by clicking "Set current map view".'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/default_view_state.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.p,{children:'UDFs with the default view state enabled show a "Zoom to layer" button. Clicking it sets the viewport to the preconfigured state.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/gifs/zoom_to_layer.gif",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"image-preview",children:"Image preview"}),"\n",(0,a.jsx)(t.p,{children:"A URL of the image to show for the UDF preview thumbnail. This can be set to any remote address that is open to the public. Fused recommends S3."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-30.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"tags",children:"Tags"}),"\n",(0,a.jsx)(t.p,{children:"Tags relevant to the UDF to make it easy to find in the Explorer search."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-31.png",alt:"Alt text"})}),"\n",(0,a.jsx)(t.h3,{id:"description",children:"Description"}),"\n",(0,a.jsx)(t.p,{children:"It's good practice to document UDFs with a brief description of their purpose, code, and datasets they import Markdown text box to include general information about the UDF. The markdown supports links, code blocks, and headers."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/image-32.png",alt:"Alt text"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},4490:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/autofiletile-74ecdd481bf0b7066fb587a166235370.png"},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>r});var a=s(6540);const i={},n=a.createContext(i);function o(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);