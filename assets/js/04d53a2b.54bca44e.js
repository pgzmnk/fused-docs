"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[1906],{9745:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=n(4848),s=n(8453),a=n(3650);const o={},c="Band algebra",i={id:"basics/transform/raster/band-algebra",title:"Band algebra",description:"{/  /}",source:"@site/docs/basics/transform/raster/band-algebra.mdx",sourceDirName:"basics/transform/raster",slug:"/basics/transform/raster/band-algebra",permalink:"/fused-docs/basics/transform/raster/band-algebra",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Raster with polygon (Zonal stats)",permalink:"/fused-docs/basics/transform/join/raster-with-polygon"},next:{title:"Vectorize",permalink:"/fused-docs/basics/transform/raster/vectorize"}},l={},d=[];function f(e){const t={code:"code",h1:"h1",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"band-algebra",children:"Band algebra"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@fused.udf\ndef udf(\n    total_bounds: list = "[-122.6953125, 37.43997405, -122.34375, 37.71859033]",\n    chip_len: int = 512,\n    band = "B02",\n    time_of_interest= "2021-09-01/2021-12-30",\n    collection= "sentinel-2-l2a"\n):\n    import json\n\n    from shapely.geometry import box\n    import geopandas as gpd\n    import fused\n    from utils import create_tiffs_catalog, run_pool_tiffs, search_pc_catalog\n    \n    bounds = json.loads(total_bounds)\n    bbox = gpd.GeoDataFrame(geometry=[box(*bounds)], crs=\'4326\')\n    query = {"eo:cloud_cover": {"lt": 5}}\n\n    stac_items = search_pc_catalog(bbox=bbox, time_of_interest=time_of_interest, query=query, collection=collection)\n    df_tiff_catalog = create_tiffs_catalog(stac_items, [band])\n    arrs_out = run_pool_tiffs(bbox, df_tiff_catalog, chip_len)\n\n    return arrs_out[0][0], bbox\n\n'})}),"\n","\n","\n",(0,r.jsx)(a.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA41V227bOBD9FUL7IHnXka2bZRswsEmLPrZAk5dFZBgUNXIIy6SWpJq4gf%2B9Q1FW07gPFQyLPGfuHA1fPSYr8NYeP7ZSGdKeKmAHQjVpq0MhBlQbBfTYcGMJbUa87jRUO9q2I7IH2VJRoRj%2B9m01Ei9UKXoat1SfBOOyEIX4izxw0wCRNTFPQHprRhra7ErZiUqTDboMDbyYHRdtZwL%2FwbKEH%2BkeiJPxp6TwHm%2BiOA4XqyyJ4mxKkjxMk9UqT%2Be46akkTXJH5NEyW82TZFt4k0JY8zaEoPDuMHhCmz2UivackQcQGELhsWWdpUCzspovFqt0EWVVzViUs7hcQJ1XOYOMZglE5aqu6nzFylVc0nSeZHMax2laeC7br1CDAsFgTZ6MafV6NmsbKsBQdWLyiBmCCo%2BcKallbUKEZhU1VIOZaRCGC2hu4psmpoW4u%2F388R6Dey0Ewcdnkmosjb8m%2Ft088qcDXDYdOCwesb0CEA5MRlBB5aD0LQTVHsIcsZ7KrqmBWVwxy2XiqHykBFcOWl5LL7KeWt6OlH7mKlr0aBT9gsaxQ2O%2FEGdX2C%2Bt4VJoUkvVd5KGBpghzxyNY8%2FKgd6QhmsT9LULD3DSwWTiDHzALjfwO123xV53RnbUNaWDS%2FmCnXPvNKggTobQdeFNh42eEi4qeNksJ9fGyj8wVv7OWDzE%2FZFr7KDTm8ChGmT75n5W3EBQ%2B%2F%2FJbuTX5PUqqTOx3X%2BFl2d%2FcPS1E6Sravf19nWmTUNK1NKF%2BBc9McqeYKdAy04xKDDKGoeEYMFk7c7OynLMDHv27BBr5TDtCUyLuGPBeI96VLKP7KzSMDbCB6oPwTh9QtWJoP9QnZ2N%2FcMl1nLzdpJMiVXffKKNBnvmF9tDUI%2F2vUUv6MuRCkynxIW3NSjEzwxcYq4yt88Up6PNBbAEvQZ2XGd2YzFty9Be6uKuT%2FXx6hS223ea5R9qllbTBvNZqiNt%2BHfsgorXw7Sxh9EYG0XwLq4b8s7dhMyuhP55JzQhf5M4yy4jDY2rvtf6qRz0rtw6%2FEZx%2FOgQJ9OphcDvuDBL%2F1L%2BQnhTT8H%2FHVdwxOmmvfWjN14iAwfa2KW7QnBxoqrBl7urvO3U4%2FpT1zT3zM40b13b8z3%2FAHWNA%2BjaBgAA"}),"\n"]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}},3650:(e,t,n)=>{n.d(t,{A:()=>s});n(6540);var r=n(4848);function s(e){let{children:t,url:n}=e;return(0,r.jsx)("iframe",{src:n,height:"1050px",width:"100%",scrolling:"no"})}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var r=n(6540);const s={},a=r.createContext(s);function o(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);