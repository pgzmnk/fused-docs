"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[1906],{9745:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var s=n(4848),o=n(8453),r=n(3650);const a={},i="Band algebra",c={id:"basics/transform/raster/band-algebra",title:"Band algebra",description:"{/  /}",source:"@site/docs/basics/transform/raster/band-algebra.mdx",sourceDirName:"basics/transform/raster",slug:"/basics/transform/raster/band-algebra",permalink:"/fused-docs/basics/transform/raster/band-algebra",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Raster with polygon (Zonal stats)",permalink:"/fused-docs/basics/transform/join/raster-with-polygon"},next:{title:"Vectorize",permalink:"/fused-docs/basics/transform/raster/vectorize"}},l={},d=[];function u(e){const t={code:"code",h1:"h1",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"band-algebra",children:"Band algebra"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'@fused.udf\ndef udf(\n    total_bounds: list = "[-122.6953125, 37.43997405, -122.34375, 37.71859033]",\n    chip_len: int = 512,\n    band = "B02",\n    time_of_interest= "2021-09-01/2021-12-30",\n    collection= "sentinel-2-l2a"\n):\n    import json\n\n    from shapely.geometry import box\n    import geopandas as gpd\n    import fused\n    from utils import create_tiffs_catalog, run_pool_tiffs, search_pc_catalog\n    \n    bounds = json.loads(total_bounds)\n    bbox = gpd.GeoDataFrame(geometry=[box(*bounds)], crs=\'4326\')\n    query = {"eo:cloud_cover": {"lt": 5}}\n\n    stac_items = search_pc_catalog(bbox=bbox, time_of_interest=time_of_interest, query=query, collection=collection)\n    df_tiff_catalog = create_tiffs_catalog(stac_items, [band])\n    arrs_out = run_pool_tiffs(bbox, df_tiff_catalog, chip_len)\n\n    return arrs_out[0][0], bbox\n\n'})}),"\n","\n","\n",(0,s.jsx)(r.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA41V227bOBD9FUL7IHnXka2bZRswsEmLPrZAk5dFZBgUNXIIy6SWpJq4gf%2B9Q1FW07gPFQyLPGfuHA1fPSYr8NYeP7ZSGdKeKmAHQjVpq0MhBlQbBfTYcGMJbUa87jRUO9q2I7IH2VJRoRj%2B9m01Ei9UKXoat1SfBOOyEIX4izxw0wCRNTFPQHprRhra7ErZiUqTDboMDbyYHRdtZwL%2FwbKEH%2BkeiJPxp6TwHm%2BiOA4XqyyJ4mxKkjxMk9UqT%2Be46akkTXJH5NEyW82TZFt4k0JY8zaEoPDuMHhCmz2UivackQcQGELhsWWdpUCzspovFqt0EWVVzViUs7hcQJ1XOYOMZglE5aqu6nzFylVc0nSeZHMax2laeC7br1CDAsFgTZ6MafV6NmsbKsBQdWLyiBmCCo%2BcKallbUKEZhU1VIOZaRCGC2hu4psmpoW4u%2F388R6Dey0Ewcdnkmosjb8m%2Ft088qcDXDYdOCwesb0CEA5MRlBB5aD0LQTVHsIcsZ7KrqmBWVwxy2XiqHykBFcOWl5LL7KeWt6OlH7mKlr0aBT9gsaxQ2O%2FEGdX2C%2Bt4VJoUkvVd5KGBpghzxyNY8%2FKgd6QhmsT9LULD3DSwWTiDHzALjfwO123xV53RnbUNaWDS%2FmCnXPvNKggTobQdeFNh42eEi4qeNksJ9fGyj8wVv7OWDzE%2FZFr7KDTm8ChGmT75n5W3EBQ%2B%2F%2FJbuTX5PUqqTOx3X%2BFl2d%2FcPS1E6Sravf19nWmTUNK1NKF%2BBc9McqeYKdAy04xKDDKGoeEYMFk7c7OynLMDHv27BBr5TDtCUyLuGPBeI96VLKP7KzSMDbCB6oPwTh9QtWJoP9QnZ2N%2FcMl1nLzdpJMiVXffKKNBnvmF9tDUI%2F2vUUv6MuRCkynxIW3NSjEzwxcYq4yt88Up6PNBbAEvQZ2XGd2YzFty9Be6uKuT%2FXx6hS223ea5R9qllbTBvNZqiNt%2BHfsgorXw7Sxh9EYG0XwLq4b8s7dhMyuhP55JzQhf5M4yy4jDY2rvtf6qRz0rtw6%2FEZx%2FOgQJ9OphcDvuDBL%2F1L%2BQnhTT8H%2FHVdwxOmmvfWjN14iAwfa2KW7QnBxoqrBl7urvO3U4%2FpT1zT3zM40b13b8z3%2FAHWNA%2BjaBgAA"}),"\n"]})}function f(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},3650:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(6540),o=n(4848);function r(e){let{id:t,url:n}=e;const r=(0,s.useRef)(null);return(0,s.useEffect)((()=>{let e=null;document.getElementById("magic-iframe-"+t)?e=document.getElementById("magic-iframe-"+t):(e=document.createElement("iframe"),e.src=n,e.height="1050px",e.width="100%",e.scrolling="no",e.id="magic-iframe-"+t,document.body.appendChild(e));const s=r.current.getBoundingClientRect();return e.style.position="absolute",e.style.left=`${s.left+window.scrollX}px`,e.style.top=`${s.top+window.scrollY}px`,e.style.width=`${s.width}px`,e.style.height=`${s.height}px`,e.style.display="block",()=>{const e=document.getElementById("magic-iframe-"+t);e&&(e.style.left="-10000px",e.style.top="-10000px",e.style.width="0px",e.style.height="0px",e.style.display="none")}}),[]),(0,o.jsx)("div",{ref:r,style:{width:"100%",height:"1050px"}})}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var s=n(6540);const o={},r=s.createContext(o);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);