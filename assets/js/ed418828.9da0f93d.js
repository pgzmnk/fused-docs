"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[4067],{7829:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>c});var i=t(4848),o=t(8453),r=t(3650);const s={},a="Origin Destination",d={id:"basics/transform/advanced/od",title:"Origin Destination",description:"",source:"@site/docs/basics/transform/advanced/od.mdx",sourceDirName:"basics/transform/advanced",slug:"/basics/transform/advanced/od",permalink:"/fused-docs/basics/transform/advanced/od",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Isochrone",permalink:"/fused-docs/basics/transform/advanced/isochrone"},next:{title:"Routing",permalink:"/fused-docs/basics/transform/advanced/routing"}},p={},c=[];function m(n){const e={code:"code",h1:"h1",pre:"pre",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"origin-destination",children:"Origin Destination"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:"@fused.udf\ndef udf(n: int=10, num_points = 20, object_to_return: str = 'points'):\n    import geopandas as gpd\n    import pandas as pd\n    import numpy as np\n    import matplotlib.pyplot as plt\n    from shapely.geometry import Point, LineString\n    import random\n    \n    # Define the bounding box\n    # minx, miny, maxx, maxy = -122.55, 37.70, -122.35, 37.82\n    minx, miny, maxx, maxy = -5.97468,35.5492, -5.37391, 35.89908\n\n    # Generate random points within the bounding box\n    np.random.seed(1)\n    points = np.random.rand(num_points, 2)\n    points[:, 0] = points[:, 0] * (maxx - minx) + minx\n    points[:, 1] = points[:, 1] * (maxy - miny) + miny\n    \n    # Create a GeoDataFrame for the points\n    gdf_points = gpd.GeoDataFrame({'geometry': [Point(p) for p in points]})\n\n    # Generate random origin-destination pairs with weights\n    edges = []\n    for _ in range(num_points * 2):  # arbitrary number of edges\n        start_idx, end_idx = random.sample(range(num_points), 2)\n        start_point = points[start_idx]\n        end_point = points[end_idx]\n        weight = random.randint(1, 5)\n        line = LineString([start_point, end_point])\n        edges.append({'geometry': line, 'weight': weight})\n    \n    # Create a GeoDataFrame for the edges\n    gdf_edges = gpd.GeoDataFrame(edges)\n    print(gdf_edges)\n    if object_to_return == 'points':\n        return gdf_points\n    else:\n        return gdf_edges\n"})}),"\n","\n","\n",(0,i.jsx)(r.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA61U227bMAz9FUF7SDK4ievYzgXw04oNGIbtocNe4sKQLdrR4kieJDdNh%2F37KOfWGt0F2GjDIXnII1IE850WigNdUrFtlLak2XMoNoQZ0vBNKo9eYzWwbS2sA4w9%2B8vWAM9Y05w9FaiGSY5h%2BFYNT6V7jB1bYWsYpvTTTUpHB6%2FMGiWkNSRBzrGpBQeNER%2FbbQ6aqJIc4JR6xPfItY%2BfIBp1bDstrGO7XaudkBVxMSc6D61j6vh4llUbkMkgnuXxNI6uAWZhNJ1BmIfA5vM5C4MwjOOIxddxwOMiCKZ5EOYRzEu%2FnM%2BLxTTmkJfhIJW8xGrPbY91K4cduUdU%2FhUKm1mVabCtxuOAV2AGl8KSkzJyPJfm%2F5LuEP8LvlTWsvJIzSwSDq%2BicRzPPTKNxrNwEXT4K%2FIGh2iBbFnT3eFh1FmxZtoOU0lQcObjG3QeTScYnRm7ryFJKeq5elhOJp3DTA72hDO9ubpf4AwuaUIKK1id3QvYYT6emzjyL2jeOuvJCU6wbmFbDgkqXg9Ssjpi2OFz7FGpbbLoORthi3XiP%2FGOnug124M2yaqXg7V9cEivLicpfQfqvVGyC3jW5Uk4syzh5QsIbg7OkyefdQsvwBXYrBYSsp3gdp0MdiCqtX0d%2BP7gd9GFqpVOBqtzeLchZ%2BuunzzqX9F%2Fafe0b38sdBVEbnXdxz9ssn%2F3z3flWPptXswTP7pG1KMavrVCwxawXrpc0fPf1BEDY536wLRme1T2TNf4c1gReudRYd62dX1baABJlyWrDfz4CW6VZnE8BQAA"})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(m,{...n})}):m(n)}},3650:(n,e,t)=>{t.d(e,{A:()=>o});t(6540);var i=t(4848);function o(n){let{children:e,url:t}=n;return(0,i.jsx)("iframe",{src:t,height:"1050px",width:"100%",scrolling:"no"})}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>a});var i=t(6540);const o={},r=i.createContext(o);function s(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);