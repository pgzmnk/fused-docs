"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[7771],{7944:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>g,frontMatter:()=>r,metadata:()=>c,toc:()=>u});var o=t(4848),a=t(8453),s=t(8987),i=t(1023);t(290);const r={title:"Geemap",sidebar_label:"Geemap",path:"basics/out/geemap/geemap",nb_path:"basics/out/geemap.ipynb",github:"https://github.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb",colab:"https://githubtocolab.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb",description:"Use Geemap with Fused!"},d="Geemap",c={id:"basics/out/geemap/Geemap",title:"Geemap",description:"Use Geemap with Fused!",source:"@site/docs/basics/out/geemap/Geemap.mdx",sourceDirName:"basics/out/geemap",slug:"/basics/out/geemap/",permalink:"/fused-docs/basics/out/geemap/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Geemap",sidebar_label:"Geemap",path:"basics/out/geemap/geemap",nb_path:"basics/out/geemap.ipynb",github:"https://github.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb",colab:"https://githubtocolab.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb",description:"Use Geemap with Fused!"},sidebar:"tutorialSidebar",previous:{title:"Felt",permalink:"/fused-docs/basics/out/felt"},next:{title:"Google Sheets",permalink:"/fused-docs/basics/out/googlesheets/"}},l={},u=[{value:"1. Authenticate into Google Earth Engine",id:"1-authenticate-into-google-earth-engine",level:2},{value:"2. Run Overture UDF to get Buildings GeoDataFrame",id:"2-run-overture-udf-to-get-buildings-geodataframe",level:2},{value:"Render on <code>geemap</code> map",id:"render-on-geemap-map",level:2},{value:"Bonus: Perform a spatial query for custom geometry",id:"bonus-perform-a-spatial-query-for-custom-geometry",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.A,{githubUrl:"https://github.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb",colabUrl:"https://githubtocolab.com/fusedio//fused-docs/blob/main/docs/basics/out/geemap.ipynb"}),"\n",(0,o.jsx)(n.h1,{id:"geemap",children:"Geemap"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://geemap.org/",children:"Geemap"})," is a Python package to visually analyze geospatial data\nwith Google Earth Engine (GEE)."]}),"\n",(0,o.jsxs)(n.p,{children:["This snippet shows how to render a ",(0,o.jsx)(n.code,{children:"GeoDataFrame"})," returned by a UDF in geemap.\nSpecifically, the\n",(0,o.jsx)(n.a,{href:"https://github.com/fusedio/udfs/tree/main/public/Overture_Maps_Example",children:"UDF"})," loads\nBuildings from the\n",(0,o.jsx)(n.a,{href:"https://beta.source.coop/repositories/fused/overture/description/",children:"Overture"})," dataset,\nconverts them to a GEE\n",(0,o.jsx)(n.a,{href:"https://developers.google.com/earth-engine/apidocs/ee-featurecollection",children:"FeatureCollection"}),",\nand renders them on the map as vectors."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://fused-magic.s3.us-west-2.amazonaws.com/docs_assets/geemap.png",alt:"geemap"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# !pip install fused geemap earthengine-api -q\n"})}),"\n",(0,o.jsx)(n.h2,{id:"1-authenticate-into-google-earth-engine",children:"1. Authenticate into Google Earth Engine"}),"\n",(0,o.jsx)(n.p,{children:"Running this command should prompt you to open a window to get then provide the GEE\ntoken."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import ee\nimport fused\nimport geemap\n\nee.Initialize()\n"})}),"\n",(0,o.jsx)(n.h2,{id:"2-run-overture-udf-to-get-buildings-geodataframe",children:"2. Run Overture UDF to get Buildings GeoDataFrame"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Load UDF\nudf = fused.load(\n    "https://github.com/fusedio/udfs/tree/main/public/Overture_Maps_Example"\n)\n\n# Run UDF\ngdf_buildings = fused.run(udf=udf, x=10484, y=25324, z=16, engine="local")\ngdf_buildings = gdf_buildings.set_crs("WGS84")\ngdf_buildings.head()\n'})}),"\n",(0,o.jsxs)(n.h2,{id:"render-on-geemap-map",children:["Render on ",(0,o.jsx)(n.code,{children:"geemap"})," map"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Create a map centered at the given location\nMap = geemap.Map(center=(37.8, -122.4), zoom=14)\n\n# Render buildings on map\nfc = geemap.geopandas_to_ee(gdf_buildings)\nMap.addLayer(fc, {"color": "red"}, "Default Overture Buildings")\nMap\n'})}),"\n",(0,o.jsx)(n.h2,{id:"bonus-perform-a-spatial-query-for-custom-geometry",children:"Bonus: Perform a spatial query for custom geometry"}),"\n",(0,o.jsx)(n.p,{children:"First render the map and draw a single polygon for the region of interest."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# Create a map centered at the given location\nMap = geemap.Map(center=(37.8, -122.4), zoom=14)\nMap\n"})}),"\n",(0,o.jsx)(i.A,{children:"Map(center=[37.8, -122.4], controls=(WidgetControl(options=['position', 'transparent_bg'], widget=SearchDataGU\u2026"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Generate a GeoDataFrame of the drawn polygon\nroi = ee.FeatureCollection(Map.draw_features)\ngdf_bbox = geemap.ee_to_gdf(roi)\n\n# Run UDF\ngdf_buildings = udf(bbox=gdf_bbox).run_local()\n\n# Render buildings on map\nfc = geemap.geopandas_to_ee(gdf_buildings)\nMap.addLayer(fc, {}, "Custom Overture Buildings")\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python"})})]})}function g(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},1023:(e,n,t)=>{t.d(n,{A:()=>g});t(6540);var o,a=new Uint8Array(16);function s(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(a)}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const r=function(e){return"string"==typeof e&&i.test(e)};for(var d=[],c=0;c<256;++c)d.push((c+256).toString(16).substr(1));const l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(d[e[n+0]]+d[e[n+1]]+d[e[n+2]]+d[e[n+3]]+"-"+d[e[n+4]]+d[e[n+5]]+"-"+d[e[n+6]]+d[e[n+7]]+"-"+d[e[n+8]]+d[e[n+9]]+"-"+d[e[n+10]]+d[e[n+11]]+d[e[n+12]]+d[e[n+13]]+d[e[n+14]]+d[e[n+15]]).toLowerCase();if(!r(t))throw TypeError("Stringified UUID is invalid");return t};const u=function(e,n,t){var o=(e=e||{}).random||(e.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){t=t||0;for(var a=0;a<16;++a)n[t+a]=o[a];return n}return l(o)};var p=t(4848);const g=e=>(0,p.jsxs)("div",{style:{backgroundColor:"var(--ifm-background-surface-color)",marginBottom:"var(--ifm-leading)",borderRadius:"var(--ifm-global-radius)",boxShadow:"var(--ifm-global-shadow-lw)",overflow:"hidden",padding:"10px",font:"var(--ifm-code-font-size) / var(--ifm-pre-line-height) var(--ifm-font-family-monospace)"},children:[(0,p.jsx)("span",{style:{color:"var(--ifm-color-primary)"},children:"Out: "}),(0,p.jsx)("pre",{style:{margin:"0px",backgroundColor:"inherit"},children:e.children.split("\n").map((e=>(0,p.jsx)("p",{style:{marginBottom:"0px"},children:e},u())))})]})},8987:(e,n,t)=>{t.d(n,{A:()=>s});t(6540);var o=t(8774),a=t(4848);const s=e=>{let{githubUrl:n,colabUrl:t}=e;return(0,a.jsxs)("div",{className:"link-buttons",style:{textAlign:"right"},children:[(0,a.jsx)("br",{}),(0,a.jsx)(o.A,{to:t,children:(0,a.jsx)("img",{src:"https://colab.research.google.com/assets/colab-badge.svg",alt:"Open in Colab"})})," ",(0,a.jsx)(o.A,{to:n,children:(0,a.jsx)("img",{src:"https://badgen.net/static/GitHub/Open/blue?icon=github",alt:"Open in GitHub"})})]})}},290:(e,n,t)=>{t(6540);var o=t(3259),a=t.n(o),s=(t(2303),t(4848));a()({loader:()=>t.e(1236).then(t.bind(t,1236)),loading:e=>{let{timedOut:n}=e;return n?(0,s.jsx)("blockquote",{children:"Error: Loading Plotly timed out."}):(0,s.jsx)("div",{children:"loading..."})},timeout:1e4})},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(6540);const a={},s=o.createContext(a);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);