"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[7005],{4952:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var r=n(4848),s=n(8453),o=n(3650);const a={},c="Routing",i={id:"basics/transform/advanced/routing",title:"Routing",description:"<Iframe",source:"@site/docs/basics/transform/advanced/routing.mdx",sourceDirName:"basics/transform/advanced",slug:"/basics/transform/advanced/routing",permalink:"/fused-docs/basics/transform/advanced/routing",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Origin Destination",permalink:"/fused-docs/basics/transform/advanced/od"},next:{title:"Get data out",permalink:"/fused-docs/basics/out"}},d={},l=[];function u(t){const e={code:"code",h1:"h1",pre:"pre",...(0,s.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h1,{id:"routing",children:"Routing"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-python",children:"@fused.udf\ndef udf(lat_start = 34.0154145, lng_start = -118.2253804, lat_end = 33.9422, lng_end = -118.4036, cost = 'auto'):\n    import time\n    import pandas as pd\n    import geopandas as gpd\n    from shapely.geometry import Point\n\n    from utils import get_route, compute_distance\n\n    start = time.time()\n    gdf = get_route(lat_start, lng_start, lat_end, lng_end, costing = cost)\n\n    print('time to create route',time.time()-start, 'sec')\n    gdf = compute_distance(gdf, col_name = 'separation')\n    print('route length:',gdf['separation'].values[0]/1000.,'km')\n    gdf['r']=0\n    gdf['g']=255\n    gdf['b']=255\n    gdf_start = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_start,lat_start)], crs = 4326)\n    gdf_start['g']=255\n\n    gdf_end = gpd.GeoDataFrame(columns = ['geometry', 'r','g','b'],geometry = [Point(lng_end,lat_end)], crs = 4326)\n    gdf_end['r']=255\n    return pd.concat([gdf,gdf_start,gdf_end])\n\n"})}),"\n","\n","\n",(0,r.jsx)(o.A,{id:"routing",url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA32VbW%2FqNhTHv4qV%2B6IgcakDeQCkvOjacaWuk6rLthcjFXLiE7AIdmab9rKq330nxAmUsVlIcXx%2BOed%2FfI7Nu5crDt7ME7tKaUuqA4d8S5ghFd%2Bm0q0aq4HtSmFrg7HderE3wFesqrqVNaiKSY4Y%2FtYVT2UqjR1aYUvopd53tbdCrlOvXxtS%2BYU8QCEkELsBwkVuhZJMH8ibsBtSlSwHdCR5bRaa5EppLiSzYFL5%2FHR3%2F%2FOCJOQ9lQTHzU9aqW15kORPpW5mZBnQYRRTOiBf4%2FFwirOXgSOfQUqysKyO5sg4pJEjp%2BOwIx%2FZjomcXcKUBg08oZO4g%2B9BWs1K8sz0tiUnoe%2FcRpPxSYBWpoLcnqNRREctOj1pfZz%2FQu6Erje3BQN%2F3IBxPPE78Onb3QUYx9HUyYyDk8c57qDMBQp9EFhY3PQurTis%2BWBIff8k9ldgtmL5Fuv2ry8COnZf0Dh%2BSeVHU9RF1y8GyjrPTP0ghdKupKk8PlcMq4fN0TCIYIMsGt5Ypu0s9QakxIi9ptbDLRxMr98%2F9k69vsrQwRWgtQ417NQr9Fy0fhs3%2B8%2B4rFHYRV5lfdemwqDl4PIB3nDH3hTWfO5MdP2mhYVekXpzrXbk3Qn4IFa1L9mHOwRfyPe9JL8%2FzFE1s6tj5hhcrpspSm2SWzonLw0HkjcUTi6ZDBmrtiCTG%2FDHEY%2F4JMvieMTCGMKMj4COIaQwGRcZBFAEccwzv6B5nEdZ4EcsGGXhNGJh7vObVPIC%2FXcnfaj3snd0juFbvck15Uk3a0gUmlwqT9zT7cQ9to0FsmPVcReby2iVb9BHr%2BlGvJWGD7joXuuBNIY5lJCkHs6xnrPb2%2BOCuW3ebzkes6%2BvU6zq6TMhhcVDsHoV8FbLtJDUzv%2FA1%2Fq0w1mEeqByYfcczlK9AJRcO6LL%2BzPxt1K7ZHqxWAmbbxJ6tto%2Fm2PLgTbJ8uIb1PlUWy401iP1voF6NEoegU8Zt4MzyxJeXLHg4cbK8uQ3vYcr5jXYVYm39epNcLtJQkr%2FD8pVqXSyHIUDP6CDUdjdQNcSbW3YCH1v4Gn4ay%2Fw9OKNarzZ0uv%2BVpwNjK2nP5jW7ICTA9MlPpqG8V4GnjDzfVkucg0gvVnBSgMf%2FwB8ZlyT7AYAAA%3D%3D"},"routing")]})}function g(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,r.jsx)(e,{...t,children:(0,r.jsx)(u,{...t})}):u(t)}},3650:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(6540),s=n(4848);function o(t){let{id:e,url:n}=t;const o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{let t=null;document.getElementById("magic-iframe-"+e)?t=document.getElementById("magic-iframe-"+e):(t=document.createElement("iframe"),t.src=n,t.height="1050px",t.width="100%",t.scrolling="no",t.id="magic-iframe-"+e,document.body.appendChild(t));const r=o.current.getBoundingClientRect();return t.style.position="absolute",t.style.left=`${r.left+window.scrollX}px`,t.style.top=`${r.top+window.scrollY}px`,t.style.width=`${r.width}px`,t.style.height=`${r.height}px`,t.style.display="block",()=>{const t=document.getElementById("magic-iframe-"+e);t&&(t.style.left="-10000px",t.style.top="-10000px",t.style.width="0px",t.style.height="0px",t.style.display="none")}}),[]),(0,s.jsx)("div",{ref:o,style:{width:"100%",height:"1050px"}})}},8453:(t,e,n)=>{n.d(e,{R:()=>a,x:()=>c});var r=n(6540);const s={},o=r.createContext(s);function a(t){const e=r.useContext(o);return r.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:a(t.components),r.createElement(o.Provider,{value:e},t.children)}}}]);