"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[6322],{8586:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var r=s(4848),n=s(8453),o=s(3650);const a={},i="Vectorize",c={id:"basics/transform/raster/vectorize",title:"Vectorize",description:"",source:"@site/docs/basics/transform/raster/vectorize.mdx",sourceDirName:"basics/transform/raster",slug:"/basics/transform/raster/vectorize",permalink:"/fused-docs/basics/transform/raster/vectorize",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Band algebra",permalink:"/fused-docs/basics/transform/raster/band-algebra"},next:{title:"Buffer",permalink:"/fused-docs/basics/transform/vector/buffer"}},d={},l=[];function u(e){const t={code:"code",h1:"h1",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"vectorize",children:"Vectorize"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'@fused.udf\ndef udf(\n    threshold: int=100,\n    cog_url = "https://eodata.sage.uvt.ro/copernicus-dem/copernicus-dem-30m/Copernicus_DSM_COG_10_N37_00_W123_00_DEM/Copernicus_DSM_COG_10_N37_00_W123_00_DEM.tif"\n):\n    import geopandas as gpd\n    import rasterio\n    import shapely\n    from rasterio.features import shapes\n\n    with rasterio.open(cog_url) as src:\n        arr = src.read()\n        bounds = src.bounds\n        transform = src.transform\n        crs = src.crs\n    arr = (arr > threshold).astype("uint8")\n    shapes_list = list(shapes(arr, mask=None, transform=transform))\n    geoms = [shapely.geometry.shape(i[0]) for i in shapes_list]\n    gdf = gpd.GeoDataFrame(\n        shapes_list, geometry=geoms, columns=["geometry", "value"], crs=crs\n    )\n    return gdf[gdf.value == 1]\n'})}),"\n","\n","\n",(0,r.jsx)(o.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA31T34%2BbMAz%2BV1D20kqU8qMUqMTTpk2a9nanezlOVSCmRE0TlqTttdP%2B9xnacj10N4OC%2Fdmf4xjnD6kUA7IifNcqbZ32xKDaOtQ4LdsW8ooaq4HuBLedw9gBr%2FcG2Jq27YBsQLVUMgzDd9OyQnaPsZ7lVsCkIE9QWaX5GQoyvThto8E0SjAnx9yeEZyBxsjHG14Q1%2FFdJ%2FB9XMPYv%2FHUFiRyCsJKlvhZFad1wNIwLUt%2FWUd1FUdZFmTLKAt8hs6Ylou4XGZhGWdpgJSUJmlNFxEtSCFZjamG83h6Lyf9Bq4z1JcP2rUCITeuI6hF5iwIQ28RBWGWuE6UeEkSZUnYBX1xvmLzLDg72vaduLR4XTVU20khHRTstfcNwavZCUavjT0JyAuCeqleV%2FN5D5j5xZ4zqrezQ4bteaNxyS2nYn3gcEQ%2B7pt3yZ%2FQfOisux06weK53TPIUXFHLiU3Vx8e873vrNQuT0dgy23V5P4dOr3TBT2BNvnziIO1%2Feo8o7o6KcgPUD%2BNkn3Au1PehFFLc1Z%2F4NmAXddciHWlhNL5cxjH3ezgv%2Bkn6eUTiuASRpRuuQzfRyS8GTglLH%2FUe%2FhfziNntskxyyho%2Bmbe0iM0JS7R8HvPNexAWkNWz2S4WVcfGNupr1RrekLlRLXAz2W6eqUW6thPGVobTdvmwM%2BoDpd5RisgLy7h5vteiIdKA0iyqqkw8PcfQKiwxRgEAAA%3D"})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},3650:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(6540),n=s(4848);function o(e){let{id:t,url:s}=e;const o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{let e=null;document.getElementById("magic-iframe-"+t)?e=document.getElementById("magic-iframe-"+t):(e=document.createElement("iframe"),e.src=s,e.height="1050px",e.width="100%",e.scrolling="no",e.id="magic-iframe-"+t,document.body.appendChild(e));const r=o.current.getBoundingClientRect();return e.style.position="absolute",e.style.left=`${r.left+window.scrollX}px`,e.style.top=`${r.top+window.scrollY}px`,e.style.width=`${r.width}px`,e.style.height=`${r.height}px`,e.style.display="block",()=>{const e=document.getElementById("magic-iframe-"+t);e&&(e.style.left="-10000px",e.style.top="-10000px",e.style.width="0px",e.style.height="0px",e.style.display="none")}}),[]),(0,n.jsx)("div",{ref:o,style:{width:"100%",height:"1050px"}})}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>i});var r=s(6540);const n={},o=r.createContext(n);function a(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);