"use strict";(self.webpackChunkfused_docs=self.webpackChunkfused_docs||[]).push([[1906],{9745:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>b,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var s=n(4848),r=n(8453),o=n(3650);const a={},c="Band algebra",i={id:"basics/transform/raster/band-algebra",title:"Band algebra",description:"{/  /}",source:"@site/docs/basics/transform/raster/band-algebra.mdx",sourceDirName:"basics/transform/raster",slug:"/basics/transform/raster/band-algebra",permalink:"/fused-docs/basics/transform/raster/band-algebra",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Raster with polygon (Zonal stats)",permalink:"/fused-docs/basics/transform/join/raster-with-polygon"},next:{title:"Vectorize",permalink:"/fused-docs/basics/transform/raster/vectorize"}},d={},l=[];function u(e){const t={code:"code",h1:"h1",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"band-algebra",children:"Band algebra"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'@fused.udf\ndef udf(\n    total_bounds: list = "[-122.6953125, 37.43997405, -122.34375, 37.71859033]",\n    chip_len: int = 512,\n    band = "B02",\n    time_of_interest= "2021-09-01/2021-12-30",\n    collection= "sentinel-2-l2a"\n):\n    import json\n\n    from shapely.geometry import box\n    import geopandas as gpd\n    import fused\n    from utils import create_tiffs_catalog, run_pool_tiffs, search_pc_catalog\n    \n    bounds = json.loads(total_bounds)\n    bbox = gpd.GeoDataFrame(geometry=[box(*bounds)], crs=\'4326\')\n    query = {"eo:cloud_cover": {"lt": 5}}\n\n    stac_items = search_pc_catalog(bbox=bbox, time_of_interest=time_of_interest, query=query, collection=collection)\n    df_tiff_catalog = create_tiffs_catalog(stac_items, [band])\n    arrs_out = run_pool_tiffs(bbox, df_tiff_catalog, chip_len)\n\n    return arrs_out[0][0], bbox\n\n'})}),"\n","\n","\n",(0,s.jsx)(o.A,{url:"https://staging.fused.io/workbench#app/s/aH4sIAAAAAAAAA41VXY%2FiNhT9K1b6kNBCIAkhgITUma72cSvtzEs1QchxbsAi2Knt7Aw74r%2F3Og7ZWejDRojY59xv31y%2Fe0yW4K09fmqkMqQ5l8COhGrSlMdc9Kg2Cuip5sYS2gx41Wood7RpBmQPsqGiRDH87ZtyIN6oUvQ8bKk%2BC8ZlLnLxG3nmpgYiK2IOQDprRhpa7wrZilKTDboMDbyZHRdNawL%2F2bKEn%2BgeiJPxxyT3XiZRHIeLVZpEcTomSRbOk9Uqm89w01HJPMkckUXLdDVLkm3ujXJhzdsQgtx7xOAJrfdQKNpxRh5BYAi5x5ZVOgeaFuVssVjNF1FaVoxFGYuLBVRZmTFIaZpAVKyqsspWrFjFBZ3PknRG43g%2Bzz2X7VeoQIFgsCYHYxq9nk6bmgowVJ2ZPGGGoMITZ0pqWZkQoWlJDdVgphqE4QLqSTypY5qLx4cvn54wuPdcEHx8JqnG0vhr4j%2FOIn%2Fcw0XdgsPiAdsrAOHAZAAVlA6af4Sg3EOYIdZR6T3VM4s7ZrlMHJUNlODKQct76UXaUcuHgdKvXEWLDo2in9A4dmjs5%2BLiCvt3Y7gUmlRSdZ2koQZmyCtH49izsqc3pObaBF3twiOcdTAaOQN%2FYZcb%2BD9dt8Ved0Z21DWlgwv5hp3z5DSoIE6G0HXujfuNHt3bKH7BRnFjw0b5iWvsl%2FOHMKHsRbpWflXcQFD5%2F8h24Nfk%2FS6FC7G9focXF7939LUVpC0r9612VaV1TQrU0rn4Ez0xyg6wU6BlqxjkooQKR4JgwWjtTsrKckwIO%2FTiEGvlOO4IwgVxh4DxnvSgZB%2FZWqV%2BSITPVB%2BDYdaEqhVB91k6Oxv7h0ss4ebj3BgTq775TGsN9oSvtvugXux7i17QlyMVmFaJK29rkIsfGbjEXGUeXinOQpsLYAk6Deyv1uyGYtoGoZ3U1V2X6svdKWy3N5rFL2oWVtMG80WqE635d%2ByCklf9bLGHURsbRXAT14TcuBuR6Z3QHzdCI%2FI7idP0OsDQuOp6rZvBQefKrcNvFIeNDnEOnRsI%2FJYLs%2FSv5c%2BFN%2FYU%2FNtyBSecZdpbv3jDldFzoI1dugsDF2eqany5m6lbVLV8ZQeqDO72ijaHb%2Fw7LodbakIZeNuxx%2FXntq6fmB113rqyjXD5D%2BH2%2FH3xBgAA"}),"\n"]})}function b(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},3650:(e,t,n)=>{n.d(t,{A:()=>r});n(6540);var s=n(4848);function r(e){let{children:t,url:n}=e;return(0,s.jsx)("iframe",{src:n,height:"1050px",width:"100%",scrolling:"no"})}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var s=n(6540);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);